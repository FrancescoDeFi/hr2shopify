<div class="customer-page">
  <div class="customer-page-inner">
    <h1 class="customer-page-title">{{ 'customer.login.title' | t }}</h1>

    {%- form 'customer_login' -%}
      {{ form.errors | default_errors }}

      <div class="form-field">
        <label for="CustomerEmail">{{ 'customer.login.email' | t }}</label>
        <input
          type="email"
          name="customer[email]"
          id="CustomerEmail"
          autocomplete="email"
          autocorrect="off"
          autocapitalize="off"
          required
        >
      </div>

      <div class="form-field">
        <label for="CustomerPassword">{{ 'customer.login.password' | t }}</label>
        <input
          type="password"
          name="customer[password]"
          id="CustomerPassword"
          autocomplete="current-password"
          required
        >
      </div>

      <div class="form-actions">
        <button type="submit" class="primary-btn">{{ 'customer.login.submit' | t }}</button>
      </div>

      <div class="customer-page-links">
        <a href="#recover" id="RecoverPassword">{{ 'customer.login.forgot_password' | t }}</a>
        <a href="{{ routes.account_register_url }}">{{ 'customer.login.create_account' | t }}</a>
      </div>
    {%- endform -%}

    <div id="recover" class="customer-recover" style="display:none;">
      <h2>{{ 'customer.recover_password.title' | t }}</h2>
      <p>{{ 'customer.recover_password.subtext' | t }}</p>

      {%- form 'recover_customer_password' -%}
        {{ form.errors | default_errors }}

        {%- if form.posted_successfully? -%}
          <div class="form-success">
            <p>{{ 'customer.recover_password.success' | t }}</p>
          </div>
        {%- endif -%}

        <div class="form-field">
          <label for="RecoverEmail">{{ 'customer.login.email' | t }}</label>
          <input
            type="email"
            name="email"
            id="RecoverEmail"
            autocomplete="email"
            autocorrect="off"
            autocapitalize="off"
            required
          >
        </div>

        <div class="form-actions">
          <button type="submit" class="primary-btn">{{ 'customer.recover_password.submit' | t }}</button>
        </div>

        <div class="customer-page-links">
          <a href="#" id="HideRecoverPassword">{{ 'customer.recover_password.back_to_login' | t }}</a>
        </div>
      {%- endform -%}
    </div>
  </div>
</div>

<script>
  (function() {
    var recoverLink = document.getElementById('RecoverPassword');
    var hideLink = document.getElementById('HideRecoverPassword');
    var recoverForm = document.getElementById('recover');
    if (!recoverLink || !recoverForm) return;

    recoverLink.addEventListener('click', function(e) {
      e.preventDefault();
      recoverForm.style.display = 'block';
      recoverLink.closest('form').style.display = 'none';
    });

    if (hideLink) {
      hideLink.addEventListener('click', function(e) {
        e.preventDefault();
        recoverForm.style.display = 'none';
        recoverLink.closest('form').style.display = 'block';
      });
    }

    if (window.location.hash === '#recover') {
      recoverLink.click();
    }
  })();
</script>

{% schema %}
{
  "name": "Kundenlogin",
  "tag": "section",
  "class": "section-customer-login"
}
{% endschema %}
