<header class="navbar">
  <div class="nav-left">
    <a class="brand" href="{{ routes.root_url }}" aria-label="{{ shop.name }}">
      {%- if settings.logo != blank -%}
        <img class="brand-logo" src="{{ settings.logo | image_url: width: 220 }}" alt="{{ shop.name }}"{% if settings.logo_width %} width="{{ settings.logo_width }}"{% endif %}>
      {%- else -%}
        <img class="brand-logo" src="{{ 'logosvg.svg' | asset_url }}" alt="{{ shop.name }}">
      {%- endif -%}
    </a>
  </div>

  <nav class="nav-links" aria-label="{{ 'header.aria.main_nav' | t }}">
    <a href="{{ pages['inhaltsstoffe'].url | default: '/pages/inhaltsstoffe' }}">{{ 'footer.links.inhaltsstoffe' | t }}</a>
    <a href="{{ pages['forschung'].url | default: '/pages/forschung' }}">{{ 'footer.links.forschung' | t }}</a>
  </nav>

  <div class="nav-actions">
    {%- if localization.available_languages.size > 1 -%}
      <div class="nav-lang-switcher">
        {%- for language in localization.available_languages -%}
          {%- if language.iso_code != localization.language.iso_code -%}
            {%- form 'localization', class: 'nav-lang-form' -%}
              <input type="hidden" name="return_to" value="{{ request.path }}">
              <input type="hidden" name="locale_code" value="{{ language.iso_code }}">
              <button class="nav-lang-button" type="submit" aria-label="{{ 'theme.switcher.language' | t }}: {{ language.endonym_name }}">
                {{ language.iso_code | upcase }}
              </button>
            {%- endform -%}
          {%- endif -%}
        {%- endfor -%}
      </div>
    {%- endif -%}

    {%- if customer -%}
      <a class="nav-account-link" href="{{ routes.account_url }}" aria-label="{{ 'customer.account.title' | t }}">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
      </a>
    {%- endif -%}

    <a class="nav-cart-link" href="{{ routes.cart_url }}" aria-label="{{ 'header.aria.cart' | t: count: cart.item_count }}">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/>
        <line x1="3" y1="6" x2="21" y2="6"/>
        <path d="M16 10a4 4 0 01-8 0"/>
      </svg>
      {%- if cart.item_count > 0 -%}
        <span class="cart-count-badge">{{ cart.item_count }}</span>
      {%- endif -%}
    </a>

    <a class="primary-btn small no-arrow nav-buy" href="{{ routes.root_url | append: '/products/' | append: settings.primary_product_handle | replace: '//products/', '/products/' }}"{% if template.name == 'product' %} aria-current="page"{% endif %}>{{ 'sections.comparison.buy_cta' | t }}</a>

    <button class="mobile-nav-toggle" data-mobile-nav-toggle aria-label="{{ 'general.accessibility.open_menu' | t }}" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>

<div class="mobile-nav-overlay" data-mobile-nav-overlay></div>

<nav class="mobile-nav" data-mobile-nav aria-label="{{ 'header.aria.mobile_nav' | t }}">
  <a href="{{ pages['inhaltsstoffe'].url | default: '/pages/inhaltsstoffe' }}">{{ 'footer.links.inhaltsstoffe' | t }}</a>
  <a href="{{ pages['forschung'].url | default: '/pages/forschung' }}">{{ 'footer.links.forschung' | t }}</a>
  <a href="{{ routes.root_url | append: '/products/' | append: settings.primary_product_handle | replace: '//products/', '/products/' }}">{{ 'sections.comparison.buy_cta' | t }}</a>
  <a href="{{ routes.cart_url }}">{{ 'cart.title' | t }}{% if cart.item_count > 0 %} ({{ cart.item_count }}){% endif %}</a>
  {%- if customer -%}
    <a href="{{ routes.account_url }}">{{ 'customer.account.title' | t }}</a>
    <a href="{{ routes.account_logout_url }}">{{ 'customer.account.logout' | t }}</a>
  {%- else -%}
    <a href="{{ routes.account_login_url }}">{{ 'customer.login.submit' | t }}</a>
  {%- endif -%}
</nav>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_account_icon",
      "label": "Konto-Icon anzeigen",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_cart_icon",
      "label": "Warenkorb-Icon anzeigen",
      "default": true
    }
  ]
}
{% endschema %}
